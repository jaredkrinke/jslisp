<head>
<title>Editor test</title>
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.8.0/codemirror.min.js"></script>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.8.0/codemirror.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.8.0/mode/scheme/scheme.min.js"></script>
<script src="jsLisp.js"></script>
<script>
$(function () {
    var input = $('#input');
    var output = $('#output');
    var execute = $('#execute');

    // Create code editor for the input
    var editor;
    var evaluate = function () {
        var outputText;
        try {
            var inputText = editor.getValue();
            var result = interpreter.evaluate(inputText);
            if (result !== undefined) {
                outputText = interpreter.format(result);
            }
        } catch (e) {
            outputText = e.toString();
        }

        output.val(outputText);
    };

    // Set up basic evaluation and output
    var interpreter = new JSLisp.Interpreter();
    execute.click(function (e) {
        e.preventDefault();
        evaluate();
    });

    editor = CodeMirror.fromTextArea(input.get(0),
        {
            mode: 'scheme',
            autofocus: true,
            extraKeys: {
                'Ctrl-Enter': evaluate
            }
        });
});
</script>
</head>
<body>

<h3>Input</h3>
<div style="border-width: 1px; border-color: black; border-style: solid; margin: 1em 0px;">
    <textarea id="input"></textarea>
</div>
<button id="execute">Execute</button> (or press Ctrl+Enter)

<h3>Output</h3>
<textarea id="output" style="width: 100%; height: 5em;"></textarea>

</body>
</html>

